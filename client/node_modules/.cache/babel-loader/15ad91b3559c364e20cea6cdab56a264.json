{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\scliu\\\\Documents\\\\Git_repos\\\\Doctor-Rota\\\\client\\\\src\\\\element\\\\CalendarTable.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Calendar from './Calendar';\nimport useWindowDimensions from '../hook/useWindowDimensions';\nimport dayjs from 'dayjs';\nimport styled from 'styled-components'; // https://date.nager.at/swagger/index.html\n// https://day.js.org/docs/en/plugin/dev-helper\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CalendarTable(_ref) {\n  _s();\n\n  let {\n    year,\n    month\n  } = _ref;\n  const {\n    height,\n    width\n  } = useWindowDimensions();\n\n  let isLeapYear = require('dayjs/plugin/isLeapYear');\n\n  dayjs.extend(isLeapYear);\n  let isLeap = dayjs(`${year}`).isLeapYear();\n  const bigMonth = [1, 3, 5, 7, 8, 10, 12];\n  const smallMonth = [4, 6, 9, 11];\n  const [bankHolidays, setBankHolidays] = useState([]);\n  useEffect(() => {\n    fetch(`https://date.nager.at/api/v3/PublicHolidays/${year}/GB`).then(response => response.json()).then(data => {\n      const holidays = data.map(holiday => ({\n        day: getDate(holiday.date),\n        month: getMonth(holiday.date),\n        name: holiday.localName\n      }));\n      setBankHolidays(holidays);\n    });\n  }, [year]);\n\n  function getMonth(date) {\n    if (date.slice(5, 7)[0] == 0) {\n      return date.slice(6, 7);\n    }\n\n    return date.slice(5, 7);\n  }\n\n  function getDate(date) {\n    if (date.slice(8, 10)[0] == 0) {\n      return date.slice(9, 10);\n    }\n\n    return date.slice(8, 10);\n  }\n\n  function getHoliday(day) {\n    for (let i = 0; i < bankHolidays.length; i++) {\n      if (bankHolidays[i].day == day && bankHolidays[i].month == month) {\n        return bankHolidays[i].name;\n      }\n    }\n\n    return false;\n  }\n\n  const getContent = number => {\n    // maybe number is not int\n    let content = [];\n\n    for (let i = 1; i < number + 1; i++) {\n      let result = getHoliday(i);\n      content.push(result == false && /*#__PURE__*/_jsxDEV(GridItems, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-1 mx-2\",\n          children: i\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Calendar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this) || result !== false && /*#__PURE__*/_jsxDEV(GridItems, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-1 mx-2\",\n            children: i\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), result.length > 20 && width >= 1200 && /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-1 mx-1\",\n            children: [result.slice(0, 18), \" ...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 29\n          }, this) || result.length > 14 && width >= 1100 && width < 1200 && /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-1 mx-1\",\n            children: [result.slice(0, 12), \" ...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this) || result.length > 8 && width >= 915 && width < 1200 && /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-1 mx-1\",\n            children: [result.slice(0, 8), \" ...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 29\n          }, this) || /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-1 mx-1\",\n            children: result\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Calendar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this));\n    }\n\n    return content;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Table, {\n    children: /*#__PURE__*/_jsxDEV(CalendarGrid, {\n      children: bigMonth.includes(month) && getContent(31) || smallMonth.includes(month) && getContent(30) || month == 2 && isLeap == true && getContent(29) || month == 2 && isLeap == false && getContent(29)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CalendarTable, \"K70FA43deX9dNMSVUY1cKDRegEU=\", false, function () {\n  return [useWindowDimensions];\n});\n\n_c = CalendarTable;\nconst Table = styled.div`\n    width: 100%;\n    padding: 10px;\n    column-gap:10px;\n    border-radius: 5px;\n    background-color: white;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n`;\n_c2 = Table;\nconst CalendarGrid = styled.div`\n    display: grid;\n    grid-template-columns: 1fr;\n    \n    @media (min-width: 915px){\n        grid-template-columns: repeat(7, 1fr)\n    }\n`;\n_c3 = CalendarGrid;\nconst GridItems = styled.div`\n    padding: 5px;\n    border-radius: 5px;\n\n    &:hover {\n        background-color: #EDFCF9;\n    }\n\n    h3 {\n        font-size: 13px;\n    }\n`;\n_c4 = GridItems;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"CalendarTable\");\n$RefreshReg$(_c2, \"Table\");\n$RefreshReg$(_c3, \"CalendarGrid\");\n$RefreshReg$(_c4, \"GridItems\");","map":{"version":3,"names":["React","useState","useEffect","Calendar","useWindowDimensions","dayjs","styled","CalendarTable","year","month","height","width","isLeapYear","require","extend","isLeap","bigMonth","smallMonth","bankHolidays","setBankHolidays","fetch","then","response","json","data","holidays","map","holiday","day","getDate","date","getMonth","name","localName","slice","getHoliday","i","length","getContent","number","content","result","push","includes","Table","div","CalendarGrid","GridItems"],"sources":["C:/Users/scliu/Documents/Git_repos/Doctor-Rota/client/src/element/CalendarTable.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\n\r\nimport Calendar from './Calendar'\r\nimport useWindowDimensions from '../hook/useWindowDimensions'\r\n\r\nimport dayjs from 'dayjs'\r\n\r\nimport styled from 'styled-components'\r\n\r\n// https://date.nager.at/swagger/index.html\r\n// https://day.js.org/docs/en/plugin/dev-helper\r\n\r\nexport default function CalendarTable({ year, month }){\r\n    const { height, width } = useWindowDimensions();\r\n\r\n    let isLeapYear = require('dayjs/plugin/isLeapYear')\r\n    dayjs.extend(isLeapYear)\r\n\r\n    let isLeap = dayjs(`${year}`).isLeapYear()\r\n\r\n    const bigMonth = [1, 3, 5, 7, 8, 10, 12]\r\n    const smallMonth = [4, 6, 9, 11]\r\n\r\n    const [bankHolidays, setBankHolidays] = useState([])\r\n\r\n    useEffect(() => {\r\n        fetch(`https://date.nager.at/api/v3/PublicHolidays/${year}/GB`)\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            const holidays = data.map((holiday) => ({\r\n                day: getDate(holiday.date),\r\n                month: getMonth(holiday.date),\r\n                name: holiday.localName\r\n            }))\r\n\r\n            setBankHolidays(holidays)\r\n        })\r\n    }, [year])\r\n\r\n    function getMonth(date){\r\n        if(date.slice(5, 7)[0] == 0){\r\n            return date.slice(6, 7)\r\n        }\r\n        return date.slice(5, 7)\r\n    }\r\n    \r\n    function getDate(date){\r\n        if(date.slice(8, 10)[0] == 0){\r\n            return date.slice(9, 10)\r\n        }\r\n        return date.slice(8, 10)\r\n    }\r\n\r\n    function getHoliday(day){\r\n        for(let i = 0; i < bankHolidays.length; i++){\r\n            if(bankHolidays[i].day == day && bankHolidays[i].month == month){\r\n                return bankHolidays[i].name\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    const getContent = number => {\r\n        // maybe number is not int\r\n        let content = [];\r\n        for (let i = 1; i < number+1; i++) {\r\n            let result = getHoliday(i)\r\n            content.push(\r\n                result == false &&\r\n                <GridItems key={i}>\r\n                    <h3 className=\"mb-1 mx-2\">{i}</h3>\r\n                    <Calendar />\r\n                </GridItems>\r\n                || result !== false &&\r\n                <GridItems key={i}>\r\n                    <div className=\"d-flex\">\r\n                        <h3 className=\"mb-1 mx-2\">{i}</h3>\r\n                        {\r\n                            result.length > 20 && width >= 1200 &&\r\n                            <h3 className=\"mb-1 mx-1\">{result.slice(0, 18)} ...</h3>\r\n                            ||\r\n                            result.length > 14 && width >= 1100 && width < 1200 &&\r\n                            <h3 className=\"mb-1 mx-1\">{result.slice(0, 12)} ...</h3>\r\n                            ||\r\n                            result.length > 8 && width >= 915 && width < 1200 &&\r\n                            <h3 className=\"mb-1 mx-1\">{result.slice(0, 8)} ...</h3>\r\n                            || \r\n                            <h3 className=\"mb-1 mx-1\">{result}</h3>\r\n\r\n                        }\r\n                    </div>\r\n                    <Calendar />\r\n                </GridItems>\r\n            )\r\n        }\r\n        return content;\r\n    }\r\n\r\n    return (\r\n        <Table>\r\n            <CalendarGrid>\r\n                {   \r\n                    bigMonth.includes(month) && getContent(31)\r\n                    ||\r\n                    smallMonth.includes(month) && getContent(30)\r\n                    ||\r\n                    month == 2 && isLeap == true && getContent(29)\r\n                    ||\r\n                    month == 2 && isLeap == false && getContent(29)\r\n                }\r\n            </CalendarGrid>\r\n        </Table>\r\n    )\r\n}\r\n\r\nconst Table = styled.div`\r\n    width: 100%;\r\n    padding: 10px;\r\n    column-gap:10px;\r\n    border-radius: 5px;\r\n    background-color: white;\r\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n`\r\n\r\nconst CalendarGrid = styled.div`\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n    \r\n    @media (min-width: 915px){\r\n        grid-template-columns: repeat(7, 1fr)\r\n    }\r\n`\r\nconst GridItems = styled.div`\r\n    padding: 5px;\r\n    border-radius: 5px;\r\n\r\n    &:hover {\r\n        background-color: #EDFCF9;\r\n    }\r\n\r\n    h3 {\r\n        font-size: 13px;\r\n    }\r\n`\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}